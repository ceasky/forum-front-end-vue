"use strict";(self["webpackChunkrest"]=self["webpackChunkrest"]||[]).push([[342],{8342:function(t,s,e){e.r(s),e.d(s,{default:function(){return v}});var r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container py-5"},[s("NavTabsVue"),s("h1",{staticClass:"mt-5"},[t._v(" 美食達人 ")]),s("hr"),s("div",{staticClass:"row text-center"},[s("div",{staticClass:"d-flex"},t._l(t.users,(function(t){return s("UsersTopPage",{key:t.id,attrs:{initialuser:t}})})),1)])],1)},o=[],a=e(9638),i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container py-5"},[s("div",{staticClass:"text-center"},[t._m(0),s("h2",[t._v(t._s(t.user.name))]),s("span",{staticClass:"badge badge-secondary"},[t._v("追蹤人數："+t._s(t.user.followerCount))]),s("p",{staticClass:"mt-3"},[t.user.isFollowed?s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteFollowing(t.user.id)}}},[t._v(" 取消追蹤 ")]):s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.addFollowing(t.user.id)}}},[t._v(" 追蹤 ")])])])])},n=[function(){var t=this,s=t._self._c;return s("a",{attrs:{href:"#"}},[s("img",{attrs:{src:"https://upload.cc/i1/2022/06/07/O6ViZr.png",width:"140px",height:"140px"}})])}],l=(e(1703),e(8390)),u=e(6163),c={props:{initialuser:{type:Object,required:!0}},data(){return{user:this.initialuser}},methods:{async addFollowing(t){try{const{data:s}=await l.Z.addFollowing({userId:t});if("success"!==s.status)throw new Error(s.message);this.user={...this.user,isFollowed:!0},this.user.followerCount=this.user.followerCount+1}catch(s){u.F.fire({icon:"error",title:"無法加入追蹤，請稍後再試"})}},async deleteFollowing(t){try{const{data:s}=await l.Z.deleteFollowing({userId:t});if("success"!==s.status)throw new Error(s.message);this.user={...this.user,isFollowed:!1},this.user.followerCount=this.user.followerCount-1}catch(s){u.F.fire({icon:"error",title:"無法取消追蹤，請稍後再試"})}}}},d=c,h=e(1001),p=(0,h.Z)(d,i,n,!1,null,null,null),f=p.exports,w={components:{NavTabsVue:a.Z,UsersTopPage:f},data(){return{users:[]}},created(){this.fetchTopUsers()},methods:{async fetchTopUsers(){try{const{data:t}=await l.Z.getTopUsers();this.users=t.users.map((t=>({id:t.id,name:t.name,image:t.image,followerCount:t.FollowerCount,isFollowed:t.isFollowed})))}catch(t){console.log(t),u.F.fire({icon:"error",title:"無法取得美食達人，請稍後再試"})}}}},g=w,C=(0,h.Z)(g,r,o,!1,null,null,null),v=C.exports}}]);
//# sourceMappingURL=342.fce0030a.js.map