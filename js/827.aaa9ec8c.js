"use strict";(self["webpackChunkrest"]=self["webpackChunkrest"]||[]).push([[827],{8827:function(t,s,e){e.r(s),e.d(s,{default:function(){return A}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container py-5"},[s("NavTabsVue"),t.isLoading?s("SpinnerVue"):[s("h1",{staticClass:"mt-5"},[t._v(" 最新動態 ")]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("h3",[t._v("最新餐廳")]),s("NewsRestsVue",{attrs:{restaurants:t.restaurants}})],1),s("div",{staticClass:"col-md-6"},[s("h3",[t._v("最新評論")]),s("NewsCommentsVue",{attrs:{comments:t.comments}})],1)])]],2)},r=[],n=e(9638),i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v(" 最新餐廳 ")]),s("div",{staticClass:"card-body"},t._l(t.restaurants,(function(e){return s("div",{key:e.id},[s("h4",[s("router-link",{attrs:{to:{name:"RestsDetail",params:{id:e.id}}}},[t._v(t._s(e.name))]),t._v("   "),s("small",[t._v(t._s(e.Category?e.Category.name:"未分類"))])],1),s("p",[t._v(t._s(e.description))]),t._v(" "+t._s(t._f("fromNow")(e.createdAt))+" "),s("hr")])})),0)])},o=[],c=e(3459),l={mixins:[c.q],props:{restaurants:{type:Array,required:!0}}},u=l,d=e(1001),m=(0,d.Z)(u,i,o,!1,null,"2ed703e4",null),v=m.exports,_=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v(" 最新評論 ")]),s("div",{staticClass:"card-body"},t._l(t.comments,(function(e){return s("div",{key:e.id},[s("h4",[s("router-link",{attrs:{to:{name:"RestsDetail",params:{id:e.id}}}},[t._v(" "+t._s(e.User.name)+" ")])],1),s("p",[t._v(t._s(e.text))]),t._v("by "),s("a",{attrs:{href:"#"}},[t._v(" "+t._s(e.User.name)+" ")]),t._v(" "+t._s(t._f("fromNow")(e.createdAt))+" "),s("hr")])})),0)])},h=[],f={mixins:[c.q],props:{comments:{type:Array,required:!0}},watch:{rest(){console.log("13",this.comments),console.log("45",this.comments[0].Restaurant.name),console.log("78",this.comments[0].User.name)}}},p=f,C=(0,d.Z)(p,_,h,!1,null,"a71db338",null),g=C.exports,y=e(2287),w=e(6163),b=function(){var t=this;t._self._c;return t._m(0)},x=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"spinner"},[s("div",{staticClass:"bouncing-loader"},[s("div"),s("div"),s("div")])])}],k={},N=(0,d.Z)(k,b,x,!1,null,"572f5a3a",null),V=N.exports,R={components:{NavTabsVue:n.Z,NewsRestsVue:v,NewsCommentsVue:g,SpinnerVue:V},data(){return{restaurants:[],comments:[],isLoading:!0}},created(){this.fetchFeeds()},methods:{async fetchFeeds(){try{const{data:t}=await y.Z.getRestaurants();this.restaurants=t.restaurants,this.comments=t.comments,this.isLoading=!1}catch(t){this.isLoading=!1,console.log("erroe",t),w.F.fire({icon:"error",title:"無法取得資料"})}}}},Z=R,q=(0,d.Z)(Z,a,r,!1,null,null,null),A=q.exports},2287:function(t,s,e){var a=e(6163);s["Z"]={getRestaurants(){return a.l.get("/restaurants/feeds")},createComments({restaurantId:t,text:s}){return a.l.post("/comments",{restaurantId:t,text:s})},deleteComments({commentId:t}){return a.l["delete"](`/comments/${t}`)}}}}]);
//# sourceMappingURL=827.aaa9ec8c.js.map